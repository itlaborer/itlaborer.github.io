#备份repomkdir?/etc/yum.repos.d/bakmv /etc/yum.repos.d/C*.repo?/etc/yum.repos.d/bak/tee?/etc/yum.repos.d/Ali.repo <<-'EOF'[base]name=CentOS-$releasever - Base - 163.combaseurl=http://mirrors.aliyun.com/centos/$releasever/os/$basearch/gpgcheck=1gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7[updates]name=CentOS-$releasever - Updates - 163.combaseurl=http://mirrors.aliyun.com/centos/$releasever/updates/$basearch/gpgcheck=1gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7[extras]name=CentOS-$releasever - Extras - 163.combaseurl=http://mirrors.aliyun.com/centos/$releasever/extras/$basearch/gpgcheck=1gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7EOFyum clean allyum makecacheyum update -y二、安装docker-ce#1.卸载旧版本的 Docker（如果存在）yum remove docker docker-client docker-client-latest docker-common docker-latest docker-latest-logrotate docker-logrotate docker-engine docker-engine-selinux docker-selinux#2.安装必要的依赖包yum install -y yum-utils device-mapper-persistent-data lvm2#3.添加 Docker 的官方仓库(使用国内源如阿里云）yum-config-manager?--add-repo?https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo#4.安装 Dockeryum install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin#5.启动 Docker 服务并设置开机自启动systemctl start dockersystemctl enable docker#6.验证安装docker version#7.配置 Docker 镜像加速器（可选）#已经添加国内常见源#使用阿里云镜像加速器（https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors ）tee /etc/docker/daemon.json <<-'EOF'{? "registry-mirrors": [? ??"https://di.1st.name",? ??"https://3zv5rh4x.mirror.aliyuncs.com",? ??"https://docker.hpcloud.cloud",? ??"https://docker.m.daocloud.io",? ??"https://docker.unsee.tech",? ??"https://docker.1panel.live",? ??"http://mirrors.ustc.edu.cn",? ??"https://docker.chenby.cn",? ??"http://mirror.azure.cn",? ??"https://dockerpull.org",? ??"https://dockerhub.icu",? ??"https://hub.rat.dev"? ? ]}EOF#清除 Docker 缓存docker system prune -a#这将删除所有未使用的容器、网络、镜像（包括中间镜像层）和可选的卷#8.重启 Docker 服务以使配置生效systemctl daemon-reloadsystemctl restart docker#9.查看镜像源配置是否生效docker info#在输出结果中，找到 Registry Mirrors 字段，如果显示了你配置的镜像源地址，说明配置成功#10.docker?search无法搜索自定义镜像源，一般需要自行在镜像源搜索可用镜像#11.下载并运行镜像docker run hello-world